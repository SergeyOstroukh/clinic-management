# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (16 –Ω–æ—è–±—Ä—è 2025)

## üêõ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã

–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (Railway —Å–æ SQLite) –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏:
1. ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –∏–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
2. ‚ùå –ù–µ –º–µ–Ω—è–ª—Å—è —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã
3. ‚ùå –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—Ä–∞—á–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å –∏–º—è –≤ —Ç–∞–±–ª–∏—Ü–µ
4. ‚ùå –î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PostgreSQL –±—ã–ª –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –≤–µ—Å—å backend –Ω–∞ async/await, –Ω–æ:
- –í `init-db.js` –¥–ª—è SQLite –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è **—Å–º–µ—à–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (—Å—Ç–∞—Ä—ã–π `db.serialize()` + –Ω–æ–≤—ã–µ –ø—Ä–æ–º–∏—Å—ã)
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ **race condition** - –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –Ω–µ –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ
- –î–ª—è SQLite –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PostgreSQL (`RETURNING id`), –∫–æ—Ç–æ—Ä—ã–π SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é async init-db.js
**–ë—ã–ª–æ:**
```javascript
return new Promise((resolve, reject) => {
  db.serialize(() => {
    db.run(`CREATE TABLE...`, handleError);
    // ... –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö run()
  });
});
```

**–°—Ç–∞–ª–æ:**
```javascript
async function initializeSQLite() {
  await db.run(`CREATE TABLE IF NOT EXISTS clients...`);
  await db.run(`CREATE TABLE IF NOT EXISTS services...`);
  // –í—Å–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ await
}
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è SQLite
**–ë—ã–ª–æ:**
```javascript
const result = await db.run(
  'INSERT INTO doctors (...) VALUES ($1, $2, $3) RETURNING id',
  ['–ò–≤–∞–Ω–æ–≤', '–ò–≤–∞–Ω', '–¢–µ—Ä–∞–ø–µ–≤—Ç']
);
```

**–°—Ç–∞–ª–æ:**
```javascript
if (usePostgres) {
  const result = await db.query(
    'INSERT INTO doctors (...) VALUES ($1, $2, $3) RETURNING id',
    ['–ò–≤–∞–Ω–æ–≤', '–ò–≤–∞–Ω', '–¢–µ—Ä–∞–ø–µ–≤—Ç']
  );
  doctorId = result[0].id;
} else {
  const result = await db.run(
    'INSERT INTO doctors (...) VALUES (?, ?, ?)',
    ['–ò–≤–∞–Ω–æ–≤', '–ò–≤–∞–Ω', '–¢–µ—Ä–∞–ø–µ–≤—Ç']
  );
  doctorId = result.lastID;
}
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω—ã default –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
**–ë—ã–ª–æ:**
```javascript
query: (text, params) => { ... }
```

**–°—Ç–∞–ª–æ:**
```javascript
query: (text, params = []) => { ... }
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ `undefined`.

### 4. –£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥
–£–¥–∞–ª–µ–Ω –º–µ—Ç–æ–¥ `serialize()` –∏–∑ `database.js`, —Ç–∞–∫ –∫–∞–∫ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω.

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ SQLite –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ
- ‚úÖ –ù–µ—Ç race conditions
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `server/database.js` - –¥–æ–±–∞–≤–ª–µ–Ω—ã default –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —É–¥–∞–ª–µ–Ω serialize
2. `server/init-db.js` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ async/await
3. `client/src/pages/LoginPage/LoginPage.js` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å response.data
4. `client/src/App.js` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω handleLogin

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –õ–æ–∫–∞–ª—å–Ω–æ (SQLite):
```bash
npm run dev
```

1. –í–æ–π—Ç–∏ –∫–∞–∫ Admin/admin
2. –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ —Å –§–ò–û
3. –°–æ–∑–¥–∞—Ç—å –≤—Ä–∞—á–∞
4. –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å

### –ù–∞ Railway:
1. –°–¥–µ–ª–∞—Ç—å push
2. –î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤—Ä–∞—á–µ–π, –∑–∞–ø–∏—Å–µ–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

