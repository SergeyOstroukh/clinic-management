# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ

## ‚úÖ –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û PostgreSQL (–ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ –ø—Ä–æ–¥–µ)

–ö–æ–¥ —É–ø—Ä–æ—â–µ–Ω - —É–±—Ä–∞–Ω–∞ –≤—Å—è –ª–æ–≥–∏–∫–∞ –¥–ª—è SQLite. –¢–µ–ø–µ—Ä—å –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é Railway –ë–î

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à—É Railway PostgreSQL –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `DATABASE_URL` –∏–∑ Railway
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env`:

```env
DATABASE_URL=postgresql://postgres:...@metro.proxy.rlwy.net:41155/railway
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
npm run dev
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –í—ã –±—É–¥–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å PROD –¥–∞–Ω–Ω—ã–º–∏!

---

## üì¶ –í–∞—Ä–∏–∞–Ω—Ç 2: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL —á–µ—Ä–µ–∑ Docker:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Desktop**: https://www.docker.com/products/docker-desktop/

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL**:
```bash
docker run --name clinic-postgres -e POSTGRES_PASSWORD=password -p 5432:5432 -d postgres:15
```

3. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env`**:
```env
DATABASE_URL=postgresql://postgres:password@localhost:5432/postgres
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
```bash
npm run dev
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker stop clinic-postgres

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
docker start clinic-postgres

# –£–¥–∞–ª–∏—Ç—å (—Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö)
docker rm -f clinic-postgres
```

---

## üíª –í–∞—Ä–∏–∞–Ω—Ç 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL –Ω–∞–ø—Ä—è–º—É—é

### Windows:

1. –°–∫–∞—á–∞–π—Ç–µ: https://www.postgresql.org/download/windows/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
3. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: `password`)
4. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ —Å–ª—É–∂–±–∞ Windows

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

1. –û—Ç–∫—Ä–æ–π—Ç–µ pgAdmin (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤–º–µ—Å—Ç–µ —Å PostgreSQL)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ localhost
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: `clinic`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`:

```env
DATABASE_URL=postgresql://postgres:password@localhost:5432/clinic
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
cd server
npm start
```

2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üêò –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL...
üìä –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü PostgreSQL...
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
```

3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
4. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ `Admin / admin`
5. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ä–∞—á–∞ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è!

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ SQLite (`clinic.db`), –∏—Ö –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:

### 1. –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ SQLite:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ sqlite3 CLI
npm install -g sqlite3

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ SQL
sqlite3 server/clinic.db .dump > dump.sql
```

### 2. –ò–º–ø–æ—Ä—Ç –≤ PostgreSQL:

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `dump.sql`:
- –ó–∞–º–µ–Ω–∏—Ç–µ `INTEGER PRIMARY KEY AUTOINCREMENT` –Ω–∞ `SERIAL PRIMARY KEY`
- –ó–∞–º–µ–Ω–∏—Ç–µ `DATETIME` –Ω–∞ `TIMESTAMP`
- –£–¥–∞–ª–∏—Ç–µ SQLite-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ó–∞—Ç–µ–º:
```bash
psql -U postgres -d clinic -f dump.sql
```

---

## üìù –ü—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ `server/.env`:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç)

# Docker
DATABASE_URL=postgresql://postgres:password@localhost:5432/postgres

# –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
# DATABASE_URL=postgresql://postgres:password@localhost:5432/clinic

# Railway (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å PROD –¥–∞–Ω–Ω—ã–º–∏ - –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)
# DATABASE_URL=postgresql://postgres:...@metro.proxy.rlwy.net:41155/railway

# –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000
```

---

## ‚ùì FAQ

### –û—à–∏–±–∫–∞ "connect ECONNREFUSED 127.0.0.1:5432"

**–ü—Ä–∏—á–∏–Ω–∞**: PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ**:
- Docker: `docker start clinic-postgres`
- Windows: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª—É–∂–±—É PostgreSQL –≤ Services

### –û—à–∏–±–∫–∞ "password authentication failed"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å –≤ `DATABASE_URL`.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∑–∞–¥–∞–ª–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

### –û—à–∏–±–∫–∞ "database does not exist"

**–ü—Ä–∏—á–∏–Ω–∞**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ**: 
- Docker: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `postgres` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞: —Å–æ–∑–¥–∞–π—Ç–µ –ë–î —á–µ—Ä–µ–∑ pgAdmin

### –•–æ—á—É –≤–µ—Ä–Ω—É—Ç—å SQLite –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**, –Ω–æ –µ—Å–ª–∏ –æ—á–µ–Ω—å –Ω—É–∂–Ω–æ:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ë–î –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ –ø—Ä–æ–¥–µ - —ç—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ –±–∞–≥–æ–≤
- –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker –¥–ª—è PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker** - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±:
- 1 –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PostgreSQL
- –ù–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –Ω–∏—á–µ–≥–æ –∫—Ä–æ–º–µ Docker
- –õ–µ–≥–∫–æ —É–¥–∞–ª–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
- –¢–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ —Å—Ä–µ–¥–∞ –∫–∞–∫ –Ω–∞ –ø—Ä–æ–¥–µ

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –≤–µ–∑–¥–µ PostgreSQL - –Ω–∞–¥–µ–∂–Ω–æ –∏ –±–µ–∑ —Å—é—Ä–ø—Ä–∏–∑–æ–≤! üêò**

